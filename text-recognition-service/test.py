import json
import base64
import boto3
import easyocr
import numpy as np
from PIL import Image
import io

textract = boto3.client('textract', verify=False)
reader = easyocr.Reader(['en'], gpu=False)

def method_textract(base64_image):
    image_bytes = base64.b64decode(base64_image)
    response = textract.detect_document_text(Document={'Bytes': image_bytes})

    lines = []
    confidences = []
    for block in response['Blocks']:
        if block['BlockType'] == 'LINE':
            lines.append(block['Text'])
            confidences.append(block.get('Confidence', 0))

    text = "\n".join(lines)
    avg_confidence = sum(confidences) / len(confidences) if confidences else 0
    return text, avg_confidence / 100  # Textract confidence is percent

def method_easyocr(base64_image):
    img_bytes = base64.b64decode(base64_image)
    image = Image.open(io.BytesIO(img_bytes))
    img_np = np.array(image)

    results = reader.readtext(img_np)

    texts = [res[1] for res in results]
    confidences = [res[2] for res in results]

    text = "\n".join(texts)
    avg_confidence = sum(confidences) / len(confidences) if confidences else 0
    return text, avg_confidence

base64_image = "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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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yb/VO5hhPKsCZM976UFoYOkgigAH+ZI//9oADAMBAAIAAwAAABDzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzjTjzzzzzzzzzzzzzzzzzzzzzzzzzzxjzzyxzzzzyxSDzzzzzzzzzzzzzzzzzzzzzzzzzzyjzzzzzjDTzxQDzjjDTzzzzzzzzzzzzzzzzzzzzzyDDDDTzDywzxQDgjyjTzzzzzzzzzzzzzzzzzzzzzxQwwwixjDCBxQCjzzwxzzzzzzzzzzzzzzzzzzzzzyjzzzzzQwxiRQCjzzzDTzzzzzzzzzzzzzzzzzzzzyTzzzzzjDjzxQDzDSRRzzzzzzzzzzzzzzzzzzzzzxzzzyxyxyzyyxzyyzxzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz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"
# if not base64_image:
#     return {'error': 'Missing "image" field'}

text_textract, conf_textract = method_textract(base64_image)
text_easyocr, conf_easyocr = method_easyocr(base64_image)

# Compare confidences and return best
if conf_textract >= conf_easyocr:
    best_text = text_textract
    best_confidence = conf_textract
    best_method = 'textract'
else:
    best_text = text_easyocr
    best_confidence = conf_easyocr
    best_method = 'easyocr'

print({
    'text': best_text,
    'confidence': best_confidence,
    'method_used': best_method
})

